(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){e.exports=n.p+"static/media/top-tracks.ebc6b10d.jpg"},115:function(e,t,n){e.exports=n(230)},120:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){e.exports=n.p+"static/media/bb-placeholder.cdedb10b.jpg"},163:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"app",function(){return O}),n.d(r,"auth",function(){return D}),n.d(r,"user",function(){return V}),n.d(r,"playHistory",function(){return te}),n.d(r,"topHistory",function(){return Oe}),n.d(r,"playlist",function(){return xe}),n.d(r,"playlistPopup",function(){return Ie});var a=n(0),c=n.n(a),o=n(46),i=n.n(o),l=(n(120),n(6)),s=n(7),u=n(10),p=n(11),f=n(8),m=n(39),d=n(40),y=n(25),h=n(238),v=n(111),b=n(65),g=n(103),E=n(15),_=Object(E.fromJS)({});function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;return(arguments.length>1?arguments[1]:void 0).type,e}var j=n(30),k=n.n(j),S={API_URL:"https://api.spotify.com/v1",REALM_APP_ID:"playlist-app-ectuj",REALM_KEY:"9wKqV6vHNSDljmkwx8YQm6TAywUowkp4ATAQuFrO2aHmxli72Yx1IcfP9el0FRSD",SPOTIFY_AUTHORIZE_URL:"https://accounts.spotify.com/authorize",SPOTIFY_AUTH_SCOPES:"playlist-modify-public",SPOTIFY_CLIENT_ID:"11350c12c94648f5b300ecb1a560216a",CALLBACK_URL:"".concat(window.location.origin,"/billboardify/callback")},N=n(12),w=function(e,t){var n=e;return Object(N.isObject)(t)&&!Object(N.isEmpty)(t)&&(n+="?"+Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")),n},T=function(){var e=window.location.href.split("#access_token=");return Object(N.last)(e)},R=n(104),P=n.n(R)()({basename:"/billboardify"}),I="auth/SET_USER_LOGGED_IN",C=function(){return function(e){var t={client_id:S.SPOTIFY_CLIENT_ID,redirect_uri:S.CALLBACK_URL,scope:S.SPOTIFY_AUTH_SCOPES,response_type:"token"},n=w(S.SPOTIFY_AUTHORIZE_URL,t);window.location.href=n}},A=Object(E.fromJS)({isLoggedIn:!1});function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;switch((arguments.length>1?arguments[1]:void 0).type){case I:return e.set("isLoggedIn",!0);default:return e}}var L=n(50),x=n(105),U=n.n(x),H=n(106),Y=n.n(H).a.create({baseURL:S.API_URL,responseType:"json",headers:{Accept:"application/json","Content-Type":"application/json"}}),F=U()(Y),B=function(e,t){return Object(N.last)(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.errorSuffix,a=void 0===r?"_FAIL":r,c=n.successSuffix,o=void 0===c?"_SUCCESS":c;if("undefined"!==typeof e.type){var i=e.type;t=[i,"".concat(i).concat(o),"".concat(i).concat(a)]}else{if("undefined"===typeof e.types)throw new Error('Action needs to have "type" or "types" key which is not null');t=e.types}return t}(e,t))},J=function(){return k.a.get("accessToken")},W=function(){return function(e,t){var n=J(),r=function(e){return Object(N.get)(e,["routing","location","pathname"])}(t());if(k.a.set("redirectTo",r),!Object(N.isNil)(n))return e(C());P.replace("/login")}},z=function(e){var t=Object(N.get)(e,"error.response.status"),n=e.error,r=e.action,a=e.next,c=e.options,o=e.dispatch;if(function(e){return 401===e}(t))return o(W());var i={text:Object(N.get)(n,"response.statusText",n.message),code:Object(N.get)(n,"response.status")},l={type:B(r,c),error:i,payload:Object(N.get)(r,"payload")};return a(l),l},M=function(e){var t=e.endpoint,n=e.type,r=e.types,a=e.payload,c=e.method,o=void 0===c?"GET":c,i=Object(L.a)(e,["endpoint","type","types","payload","method"]);return function(e){var c=function(e){return e?{Authorization:"Bearer ".concat(e)}:{}}(J());return e({type:n,types:r,payload:Object(m.a)({},a,{request:Object(m.a)({url:t,method:o,headers:Object(m.a)({},c)},i),options:{onError:z}})})}},K="user/FETCH_USER_PROFILE_SUCCESS",G=function(e){return e.user.get("user")},q=Object(E.fromJS)({user:{},isLoadingUser:!1});function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return e.set("user",Object(E.fromJS)(t.payload.data));default:return e}}var X=n(19),Q="history/FETCH_PLAY_HISTORY_SUCCESS",Z=function(e){return e.playHistory.get("history")},$=(Object(X.createSelector)(Z,function(e){return e.map(function(e){return e.getIn(["track","uri"])})}),function(e){return e.getIn(["track","album","images",0,"url"])}),ee=(Object(X.createSelector)(Z,function(e){return e.map($)}),Object(E.fromJS)({history:{},isLoadingHistory:!1}));function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return e.set("history",Object(E.fromJS)(t.payload.data.items));default:return e}}var ne=n(5),re=n.n(ne),ae=n(9),ce=n(81),oe={id:S.REALM_APP_ID,timeout:1e4},ie=new ce.a(oe),le=function(){var e=Object(ae.a)(re.a.mark(function e(t){var r,a,c;return re.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(153),a=ce.b.apiKey(t),e.prev=2,e.next=5,ie.logIn(a);case 5:return c=e.sent,r(c.id===ie.currentUser.id),e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(2),console.error("Failed to log in",e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(ae.a)(re.a.mark(function e(t,n){var r,a,c;return re.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={_id:n},a={projection:{_id:0}},e.next=5,t.findOne(r,a);case 5:return c=e.sent,e.abrupt("return",c.ranking);case 9:return e.prev=9,e.t0=e.catch(0),console.error("Failed to get ranking of ".concat(n),e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(ae.a)(re.a.mark(function e(t,n){var r,a;return re.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.uri){e.next=2;break}return e.abrupt("return",{trackName:n.title,trackArtist:n.artist,track_info:{uri:null},artist_info:{genres:"N/A"}});case 2:return e.prev=2,r={_id:n.uri},a={projection:{_id:0}},e.abrupt("return",t.findOne(r,a));case 8:return e.prev=8,e.t0=e.catch(2),console.error("Failed to get track info of ".concat(n.uri),e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,n){return e.apply(this,arguments)}}(),pe=function(){var e=Object(ae.a)(re.a.mark(function e(t,n){var r,a,c,o,i,l;return re.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le(n);case 3:return r=e.sent,console.log("Successfully logged in!"),a=r.mongoClient("mongodb-atlas"),c=a.db("data").collection("billboard_rankings"),o=a.db("data").collection("spotify_info"),e.next=10,se(c,t);case 10:return i=e.sent,e.next=13,Promise.all(i.map(function(e){return ue(o,e)}));case 13:return l=e.sent,e.abrupt("return",l);case 17:e.prev=17,e.t0=e.catch(0),console.error("Failed to get Top 50 of ".concat(t),e.t0);case 20:case"end":return e.stop()}},e,null,[[0,17]])}));return function(t,n){return e.apply(this,arguments)}}(),fe="history/FETCH_TOP_HISTORY",me="history/FETCH_TOP_HISTORY_SUCCESS",de="history/SET_DATE",ye=function(e){return e.topHistory.get("tracks")},he=function(e){return e.topHistory.get("date")},ve=Object(X.createSelector)(ye,function(e){return Object(E.fromJS)({tracks:e})}),be=Object(X.createSelector)(ye,function(e){return e.map(function(e){return e.getIn(["track_info","uri"])})}),ge=function(e){return e.getIn(["track_info","album","images",0,"url"])},Ee=(Object(X.createSelector)(ye,function(e){return e.map(ge)}),function(){return function(e,t){var n=he(t());pe(n,S.REALM_KEY).then(function(t){return e({type:fe,payload:t})})}}),_e=Object(E.fromJS)({tracks:{},date:"2020-11-18",isLoading:!1});function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return e.set("tracks",Object(E.Map)());case me:return e.set("tracks",Object(E.fromJS)(t.payload));case de:return console.log("The payload is",t.payload),e.set("date",t.payload);default:return e}}var je="playlistPopup/OPEN_PLAYLIST_POPUP",ke="playlistPopup/CLOSE_PLAYLIST_POPUP",Se="playlistPopup/SET_PLAYLIST_IMAGES",Ne=function(e){return e.playlistPopup.get("uri")},we=Object(X.createSelector)(Ne,function(e){return!Object(N.isNil)(e)}),Te=Object(X.createSelector)(function(e){return e.playlistPopup.get("playlistImages")},function(e){return e&&0!==e.size?e.getIn([1,"url"])||e.getIn([0,"url"]):null}),Re=Object(X.createStructuredSelector)({playlistUri:Ne,playlistImage:Te,isVisible:we}),Pe=Object(E.fromJS)({uri:null,playlistImages:[]});function Ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return e.set("uri",t.payload);case ke:return e.set("uri",null).set("playlistImages",Object(E.fromJS)([]));case Se:return e.set("playlistImages",Object(E.fromJS)(t.payload));default:return e}}var Ce="playlist/CREATE_PLAYLIST",Ae="playlist/CREATE_PLAYLIST_SUCCESS",De=function(e){return function(t){return t(function(e){return function(t,n){var r=G(n()).get("id");return r?t(M({type:"playlist/GET_PLAYLIST_IMAGE",url:"/users/".concat(r,"/playlists/").concat(e,"/images"),method:"GET"})):null}}(e)).then(function(e){return t((n=e.payload.data,{type:Se,payload:n}));var n})}},Le=Object(E.fromJS)({isCreatingPlaylist:!1});function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;switch((arguments.length>1?arguments[1]:void 0).type){case Ce:return e.set("isCreatingPlaylist",!0);case Ae:return e.set("isCreatingPlaylist",!1);default:return e}}var Ue=n(236),He=n(49),Ye=n.n(He),Fe=function(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n},Be=Object(X.createStructuredSelector)({user:G,date:he,topHistory:ve}),Je=function(){return function(e,t){var n=t(),r=be(n).filter(function(e){return null!=e}),a=he(n);if(r.size)return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){console.log("playlist state is",n());var r=G(n());console.log("user is",r);var a=r.get("id");return a?t(M({type:Ce,url:"/users/".concat(a,"/playlists"),method:"POST",data:e})):null}}({name:"Billboard Top 50 \u2022 Week of ".concat(a)})).then(function(t){var n=Object(N.get)(t,"payload.data"),a=Object(N.get)(n,"id"),c=Object(N.get)(n,"uri");if(Object(N.isNil)(a)||!r.size)return null;e(function(e,t){return function(n,r){var a=G(r()).get("id");return a?n(M({type:"playlist/ADD_TRACKS_TO_PLAYLIST",url:"users/".concat(a,"/playlists/").concat(e,"/tracks"),method:"POST",data:{uris:t}})):null}}(a,r.toJS())).then(function(){e({type:je,payload:c}),e(De(a))})})}},We=(n(157),function(e){var t=e.children;return c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:"modal__content"},t))});We.defaultProps={children:void 0};var ze=We;n(158);function Me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var Ke=function(e){Object(u.a)(n,e);var t=Me(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.playlistUri,n=e.playlistImage;return e.isVisible?c.a.createElement(ze,null,c.a.createElement("div",{className:"playlist-popup"},c.a.createElement("h3",{className:"playlist-popup__title"},"Yeah!"),c.a.createElement("p",{className:"playlist-popup__info"},"Your new Playlist is now available in Spotify."),c.a.createElement("div",{className:"save-form-success"},!!n&&c.a.createElement("a",{href:t,className:"playlist-popup__image-link",title:"Open Playlist in Spotify"},c.a.createElement("img",{src:n,alt:"Playlist cover",className:"playlist-popup__image"})),c.a.createElement("div",{className:"ok-sign"},c.a.createElement("svg",{className:"progress",width:"150",height:"150",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("g",null,c.a.createElement("circle",{className:"circle_base",r:"72",cy:"75",cx:"75",fill:"none"}),c.a.createElement("circle",{className:"circle_animation",r:"72",cy:"75",cx:"75",fill:"none"}))),c.a.createElement("i",{className:"icon ion-android-done"}))),c.a.createElement("div",{className:"playlist__buttons"},c.a.createElement("a",{className:"btn btn-inline btn-dark",href:t,onClick:this.props.closePlaylistPopup},"Open Playlist"),c.a.createElement("button",{onClick:this.props.closePlaylistPopup,className:"btn btn-inline btn-default"},"Close")))):null}}]),n}(a.Component),Ge=Re,qe={closePlaylistPopup:function(){return{type:ke}}},Ve=Object(y.b)(Ge,qe)(Ke);var Xe=function(e){var t=document.querySelector('meta[name="theme-color"]');t&&(t.content=e)};n(159);function Qe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var Ze=function(e){Object(u.a)(n,e);var t=Qe(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.themeColor;e&&Xe(e)}},{key:"render",value:function(){var e=this.props,t=e.headerImageSrc,n=e.title,r=e.children;return c.a.createElement("div",{className:"list-page"},c.a.createElement("div",{style:{backgroundImage:"url(".concat(t,")")},className:"list-page__image"}),c.a.createElement("h1",{className:"list-page__title"},"Billboard Top 50"),c.a.createElement("h2",{className:"list-page__subtitle"},"Week of ",n),c.a.createElement("div",{className:"list-page__content"},c.a.createElement("div",{className:"list-page__list"},r)))}}]),n}(a.Component),$e=(n(160),function(e){var t=e.src;return c.a.createElement("span",{className:"track__cover",style:{backgroundImage:"url(".concat(t,")")}})}),et=(n(161),n(162)),tt=function(e){var t=e.track,n=e.orderNumber;return t.getIn(["track_info","uri"])?c.a.createElement("a",{className:"track-history__item",href:t.getIn(["track_info","uri"])},c.a.createElement("span",{className:"order-number"},n),c.a.createElement("span",{className:"track__info"},c.a.createElement($e,{src:t.getIn(["track_info","album","images",2,"url"])}),c.a.createElement("span",{className:"track__summary"},c.a.createElement("span",{className:"artist__genres"},t.getIn(["artist_info","genres"]).slice(0,3).join(", ")),c.a.createElement("span",{className:"track__artist"},t.getIn(["track_info","artists",0,"name"])),c.a.createElement("span",{className:"track__track-name"},t.getIn(["track_info","name"]))))):c.a.createElement("a",{className:"track-history__item",href:"/#"},c.a.createElement("span",{className:"order-number"},n),c.a.createElement("span",{className:"track__info"},c.a.createElement($e,{src:et}),c.a.createElement("span",{className:"track__summary"},c.a.createElement("span",{className:"track__artist"},t.get("trackArtist")),c.a.createElement("span",{className:"track__track-name"},t.get("trackName")))))},nt=n(52),rt=n(73),at=n.n(rt);n(163);function ct(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var ot=window,it=function(e){Object(u.a)(n,e);var t=ct(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).state={isOnTop:!0},r.scrollWatcher=r.scrollWatcher.bind(Object(nt.a)(r)),r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){ot.addEventListener("scroll",this.scrollWatcher)}},{key:"componentWillUnmount",value:function(){ot.removeEventListener("scroll",this.scrollWatcher)}},{key:"scrollWatcher",value:function(){var e=this.state.isOnTop,t=ot.pageYOffset||0;e&&t>0?this.setState({isOnTop:!1}):e||0!==t||this.setState({isOnTop:!0})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.description,r=e.onActionClick,a=this.state.isOnTop;return c.a.createElement("div",{className:at()("action-buttons",{"action-buttons--scrolled":!a})},c.a.createElement("div",{className:"action-buttons__info"},c.a.createElement("div",{className:"action-buttons__title"},t),n),c.a.createElement("div",{className:"action-buttons__button"},c.a.createElement("button",{className:"btn btn-dark",onClick:r},"Create Playlist")))}}]),n}(a.Component),lt=n(29),st=n(108),ut=n.n(st),pt=(n(164),function(e){var t=e.onSelection,n=Object(a.useState)(new Date(Ye()().toDate())),r=Object(lt.a)(n,2),o=r[0],i=r[1];return c.a.createElement(ut.a,{selected:o,onChange:function(e){return t(e,i)},minDate:new Date("1980-01-02"),maxDate:new Date})}),ft="#C6E1DC",mt="#5d42e5",dt=(n(224),n(100)),yt=function(e){var t=e.date,n=e.updateCurrentDate,r=e.topHistory,a=e.createTracksPlaylist;return c.a.createElement("div",{className:"top-history"},c.a.createElement(Ze,{headerImageSrc:dt,title:t,themeColor:mt},c.a.createElement("div",null,c.a.createElement(pt,{onSelection:n}),r.get("tracks").map(function(e,t){return c.a.createElement(tt,{orderNumber:t+1,track:e,key:e.get("track_info")})}),r.get("tracks").size>0&&c.a.createElement(it,{title:"Create a Playlist",description:"This creates a playlist from the current Top-50 tracks (if available on Spotify).",onActionClick:a}))))},ht=n(237);function vt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var bt=function(e){Object(u.a)(n,e);var t=vt(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&window.scrollTo(0,0)}},{key:"render",value:function(){return c.a.createElement(v.a,this.props)}}]),n}(a.Component),gt=Object(ht.a)(bt),Et=n(235),_t=(n(225),function(){return c.a.createElement("div",{className:"App-navigation"},c.a.createElement(Et.a,{activeClassName:"active",className:"App-navigation__link",to:"/app"},c.a.createElement("span",{className:"icon ion-help"}),c.a.createElement("span",{className:"navigation__label"},"App Info")),c.a.createElement(Et.a,{activeClassName:"active",className:"App-navigation__link",to:"/top-tracks"},c.a.createElement("span",{class:"icon ion-android-favorite-outline"}," "),c.a.createElement("span",{className:"navigation__label"},"Top 50")),c.a.createElement(Et.a,{activeClassName:"active",className:"App-navigation__link",to:"/login"},c.a.createElement("span",{class:"icon ion-android-exit"}," "),c.a.createElement("span",{className:"navigation__label"},"Log Out")))});n(226);function Ot(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var jt=function(e){Object(u.a)(n,e);var t=Ot(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"app-help"},c.a.createElement("h1",null,"Billboardify"),c.a.createElement("p",null,"With Billboardify you can discover (or rediscover) any song that appeared on the Billboard Top 50 in the past 40 years!"),c.a.createElement("p",null,"Refresh your memories by exploring each week's Top 50, and create Spotify playlists from your favorite weeks!"),c.a.createElement("h3",null,"Spotify access"),c.a.createElement("p",null,"Billboardify requires a Spotify account. Account access is client-side only and secured by the OAuth 2 authentication protocol, and your Spotify data is not stored.  For more information on the login procedure, visit this "," ",c.a.createElement("a",{href:"https://developer.spotify.com/documentation/general/guides/authorization-guide/#implicit-grant-flow",target:"_blank",rel:"noopener noreferrer"},"guide on the authorization process.")," "),c.a.createElement("h3",null,"Can I log out or sign in with a different account?"),c.a.createElement("p",null,"Sure thing, just go to"," ",c.a.createElement("a",{href:"http://accounts.spotify.com/",target:"_blank",rel:"noopener noreferrer"},"accounts.spotify.com")," ",'and press "Log Out". To sign in with a different account, open'," ",c.a.createElement("a",{href:"https://kyleschan.github.io/billboardify/login"},"https://kyleschan.github.io/billboardify/login"),"and sign in with different account."),c.a.createElement("div",{className:"app-help__footer"},c.a.createElement("a",{className:"footer__link",href:"https://github.com/kyleschan/billboardify",target:"_blank",rel:"noopener noreferrer",title:"Billboardify on Github"},c.a.createElement("i",{className:"ion-social-github"})))))}}]),n}(a.Component);n(227);function kt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var St=n(100),Nt=function(e){Object(u.a)(n,e);var t=kt(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.startAppView()}},{key:"render",value:function(){var e=this.props,t=e.topHistory,n=e.date,r=e.createTracksPlaylist,a=e.updateDate,o=e.match;return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"App-container"},c.a.createElement(_t,null),c.a.createElement(Ve,null),c.a.createElement("div",{className:"App-content"},c.a.createElement(v.a,{exact:!0,path:"".concat(o.url),render:function(){return c.a.createElement(Ue.a,{to:"/top-tracks"})}}),c.a.createElement(gt,{exact:!0,path:"".concat(o.url,"top-tracks"),render:function(){return c.a.createElement(yt,{date:n,updateCurrentDate:a,topHistory:t,createTracksPlaylist:r})}}),c.a.createElement(gt,{exact:!0,path:"".concat(o.url,"app"),component:jt}))),c.a.createElement("div",{className:"preload-images"},c.a.createElement("img",{key:St,alt:"preloaded img",src:St})))}}]),n}(a.Component),wt=Be,Tt={startAppView:function(){return function(e){console.log("Starting app view..."),e(function(e){k.a.get("accessToken")||P.replace("/login")}),e(M({type:"user/FETCH_USER_PROFILE",url:"/me"})),e(function(e){return e(Ee())})}},createTracksPlaylist:Je,updateDate:function(e,t){return function(n){n(function(e){return{type:de,payload:e}}(function(e){return Ye()(e).format().substring(0,10)}(function(e){var t=Fe(e,3-e.getDay());return t<=new Date(Ye()().toDate())?t:Fe(t,-7)}(e)))),n(Ee()),t(e)}}},Rt=Object(y.b)(wt,Tt)(Nt),Pt=n(84);n(228);function It(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var Ct=function(e){Object(u.a)(n,e);var t=It(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){Xe(ft)}},{key:"render",value:function(){return c.a.createElement("span",null,c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login__content"},c.a.createElement("h1",{className:"login__title"},"Save past Billboard charts to Spotify!"),c.a.createElement("button",{className:"btn btn-primary btn-login",onClick:this.props.authorizeUser},"Sign in with Spotify"),c.a.createElement(Pt.a,{className:"btn-link",to:"app-info"},"What is this?")),c.a.createElement("span",{className:"login__background"})))}}]),n}(a.Component),At={authorizeUser:C},Dt=Object(y.b)(function(){return{}},At)(Ct);n(229);function Lt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var xt=function(e){Object(u.a)(n,e);var t=Lt(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=S.SPOTIFY_AUTH_SCOPES.split(" ");return c.a.createElement(ze,null,c.a.createElement("div",{className:"app-info"},c.a.createElement("h1",null,"Billboardify App"),c.a.createElement("p",null,"This app allows users to both discover and save hits from past weeks of the Billboard Top 50. It uses the Spotify Web API to save playlists, should you wish to do so."),c.a.createElement("h3",null,"Required Spotify access"),c.a.createElement("p",null,"Billboardify requires access to your Spotify account. It uses the Spotify Implicit Grant Flow for user authorization. The app is client-side only, and your Spotify data is not stored in any server. For more information on the login procedure, visit this "," ",c.a.createElement("a",{href:"https://developer.spotify.com/documentation/general/guides/authorization-guide/#implicit-grant-flow",target:"_blank",rel:"noopener noreferrer"},"guide on the authorization process.")," "),c.a.createElement("h3",null,"Used Scopes"),c.a.createElement("p",null,"Scopes enable the application to access specific Spotify API endpoints. The set of scopes that are required for you to access this app are:",c.a.createElement("ul",{className:"scope-list"},e.map(function(e){return c.a.createElement("li",null,e)}))),c.a.createElement("br",null),c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://developer.spotify.com/documentation/general/guides/authorization-guide/"},"Read more about Spotify scopes"),c.a.createElement("div",{className:"app-info__buttons"},c.a.createElement(Pt.a,{className:"btn btn-secondary",to:"/login"},"OK, got it"," ",c.a.createElement("span",{"aria-label":"OK",role:"img"},"\ud83d\udc4c\ud83c\udffb")))))}}]),n}(a.Component);function Ut(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var Ht=function(e){Object(u.a)(n,e);var t=Ut(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.saveLogin()}},{key:"render",value:function(){return c.a.createElement("div",null,"Login OK")}}]),n}(a.Component),Yt={saveLogin:function(){return function(e){var t=T();if(t){k.a.set("accessToken",t);var n=k.a.get("redirectTo")||"/";k.a.remove("redirectTo"),"/login"===n&&(n="/"),P.replace(n)}else P.replace("/login");return e({type:I})}}},Ft=Object(y.b)(function(){return{}},Yt)(Ht);function Bt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var Jt=Object(b.b)(P),Wt=[g.a,Jt,F],zt=d.a.apply(void 0,Wt)(d.d)(Object(d.c)(Object(m.a)({},r,{routing:b.c})),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Mt=function(e){Object(u.a)(n,e);var t=Bt(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return c.a.createElement(y.a,{store:zt},c.a.createElement(b.a,{history:P},c.a.createElement(h.a,null,c.a.createElement(v.a,{exact:!0,path:"/login",component:Dt}),c.a.createElement(v.a,{exact:!0,path:"/app-info",component:xt}),c.a.createElement(v.a,{exact:!0,path:"/callback",component:Ft}),c.a.createElement(v.a,{path:"/",component:Rt}))))}}]),n}(a.Component),Kt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Gt(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(c.a.createElement(Mt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/billboardify",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/billboardify","/service-worker.js");Kt?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Gt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Gt(e)})}}()}},[[115,1,2]]]);
//# sourceMappingURL=main.b18f4bdd.chunk.js.map